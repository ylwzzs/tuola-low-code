---
aliases: ["1968352361480305300"]
title: 根据合同编号查询采购订单信息并写入明细
created: 2025-07-15
modified: 2025-07-15
tags: ['e-builder']
theme: e-builder
---

**1.** **场景说明**

在一些业务场景中，一个合同可能会分批次进行多笔订单交易，合同信息与订单信息分别存放于不同的表单之中，财务人员进行合同订单汇总统计时，需要根据输入的合同编号自动带出该合同内的所有订单信息。

展示效果如下：

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/2fb4bb3e21e4949b190d9dc942add13a.jpg)

**2.** **功能简介**

上述场景可以通过【字段联动】并配置相关的【自定义触发动作流】实现。用户在应用的“合同订单统计”表单中设置字段联动-可视化配置联动，并搭配自定义触发动作流，动作流中查询“订单信息表”中的订单信息，并将其输出，通过字段联动选择该动作流，便可以实现选择合同编号，自动带出该合同下的所有订单数据，并依次插入到明细表中。

**3.** **操作说明**

1.配置动作流

进入后台管理-动作流-新建动作流，选择自定义事件触发-自定义触发。

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/d89e72b03b7d4c126450a4815b589bae.jpg)

之后进行输入参数配置。在本场景中，我们需要选择合同编号之后，触发该动作流查询订单信息并带入，我们需要设置一个输入参数，其目的是为了配合我们的之后字段联动时选择合同编号这个动作。

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/896abd718d048f52060b08273299ff87.jpg)

接下来需要添加动作：查询表单，即查询订单信息表内的信息，将这些信息查询出来，之后输出这些信息，配置情况如下图所示：

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/de2ca1efefc2829a76863cac42b3f0ae.jpg)

注意在条件中，因为信息表与最终的统计表都是关联合同表单的，所以可以设置条件为“所属合同”等于我们设置的参数“合同编号”：

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/b5db44a55d11132a31940871406b30d3.jpg)

最后设置输出组件，在本场景中，输入组件只是一个触发动作的引子，输出组件则需要输出真正查询到的数据，所以我们需要进行输出参数的详细设置。输出参数设置时，我们需要注意输出的参数是放在最后统计表的明细当中的，所以我们需要添加明细表，如下图所示

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/6c1b9abbb7fd3a0de3d58eceaa8a349a.jpg)

本场景中的依据值选择订单信息全部，这样输出参数选择赋值的时候可以选择订单信息表里的所有字段，如下图所示：

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/ac0213f293f3737f7432ac1473974baf.jpg)

2.配置字段联动

进入表单设计器-点击字段联动-点击新建-新建可视化配置联动，之后进行联动的基础配置，设置联动名称，触发动作选择合同编号改变时触发，并更新明细表信息，如下图所示：

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/1e09cc90abc347e36183517ea7030dcb.jpg)

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/d93581e049f105af9155d2e5683221c5.jpg)

之后进行联动设置，选择我们新建的动作流作为数据源，此时的输入与输出参数即为我们在动作流中设置的输入输出参数，分别将其与表单中的字段对应，需要注意的是输出的参数在该表单中对应的是明细表数据。

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/02c616cefc05e106e0cc9d37546d78bf.jpg)

3.效果演示：

自定义动作流与字段联动配置完成后，即可实现在“合同订单统计表”中选择合同编号，触发动作流查询“订单信息表”中该合同的所有订单，并代入到统计表的明细中。实现选择合同编号自动带出该合同下的所有订单信息。

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/cfcf76d201dd96f523a8b786fd7d2415.jpg)

4.知识扩展

我们在应用后台搭建动作流，如果搭建的是自定义触发动作流，那么该动作流不会展示在该应用下，用户可前往前台左侧栏中的动作流进行查看

