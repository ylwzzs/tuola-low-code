---
aliases: ["1969511104410843887"]
title: 如何实现预算的编制和使用
created: 2025-07-15
modified: 2025-07-15
tags: ['e-builder']
theme: e-builder
---

**一、 方案背景**

企业预算管理可以有效地整合企业各个部门的战略规划、目标设定、业务计划等内容，实现企业管理计划的统一性和整体性。基于上述情况，我们在金融租赁管理中增加预算报销管理模块，对预算的编制和预算的使用做到精细化管理，帮助企业更加有效地管理企业和最大程度地实现战略目标。

**二、设计思路**

1：搭建预算科目和预算年份基础表，实现基础数据维护。

2：通过预算编制录入部门预算，在预算编制审批流程归档之后，将预算信息写入到预算查询台账

3：日常费用报销单通过关联预算台账科目信息，将相关信息带入到表单中。费用报销单提交时校验报销金额是否大于可用余额，如果报销金额大于可用余额，则弹框提示，报销金额不大于可用余额则提交，提交后增加占用额度、减少可用额度；如果审批中退回发起人节点，则减少占用额度、增加可用额度；流程归档后减少占用额度、增加已用额度。

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/0a286c23d8a347ad866cadf57ab04dd5.jpg)

**三、 搭建过程**

**1、预算科目、预算年份、预算编制、预算查询表单搭建**

1.1：搭建预算科目表单，实现基础科目维护，可通过添加eb字段关联科目表单实现科目上下级维护

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/a2c365976488394336ae628aedc539fd.jpg)

1.2：搭建预算年份表单，实现预算年份维护，可添加状态未封存、已封存判断预算年份是否可用

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/20d0fafb6d3bd17446a3d0ee01fb381e.jpg)

1.3：搭建预算编制单，实现部门预算详细信息录入，后续通过搭建流程、动作流实现预算数据写入预算查询台账

**![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/bc2d85fba7efbc00cc7dac1147903f23.jpg)**

1.4：搭建预算查询单，实现部门预算额度、可用额度等信息查询，后续和日常费用报销单关联，实现预算管控和使用

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/7cc3975c0c3c63fc61d52738ed84a275.jpg)

**2、设计预算编制流程、搭配动作流实现预算信息写入预算台账**

2.1：创建预算编制流程，编制人员发起流程，流程归档触发动作流将预算数据写入预算查询台账

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/3b8dda6ff4487e211ed7b86f8505ecd5.jpg)

2.2：利用动作流流程事件触发和新增表单数据，流程归档批量新增数据预算查询台账

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/4169236cb46be8fca0ab8b0b239199a5.jpg)

实现效果如图所示：预算编制流程审批通过后新增数据预算查询台账

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/7b897316f825b217c8989fa459806516.jpg)

**3、日常费用报销表单搭建**

搭建日常费用报销单：关联预算台账科目信息，后续搭配动作流实现预算管控和使用

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/6866423fc86b0c0cead8f773078c55f0.jpg)

**4、设计日常费用报销流程，搭配动作流实现预算管控和预算使用**

4.1：创建日常费用报销流程：流程流转至一级审批，触发动作流，增加预算台账占用额度，减少可用额度；流程退回发起节点触发动作流，减少预算台账占用额度、增加可用额度；流程离开二级节点归档，触发动作流，增加预算台账已用额度，减少占用额度。

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/6ffc881edcde1c483a4d3eeb8d3e9308.jpg)

4.2：创建动作流，通过添加点击按钮时添加触发按钮，实现日常费用报销保存、保存、保存并新建、编辑保存执行前触发；添加变量当前行序号、出错行序号两个变量用于存储错误明细的位置，并通过动作流多次执行执行循环、搭配条件分支、变量赋值功能实现日常费用报销保存时循环遍历明细表，校验明细表每一行数据的报销金额是否超过可用金额，若超出，将该条明细的位置追加到定义的变量；循环校验结束之后，通过动作流分支和页面交互实现异常数据提醒。

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/30f9e185599fbf80cbf01c2d74f1af8d.jpg)

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/7dcad24feff58e66cbca2e439b556c26.jpg)

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/dd8c79b8fceaec0a85ebb64d70465bb4.jpg)

4.3:日常费用报销提交校验通过之后，利用动作流流程事件触发、内置多次执行、修改表单数据实现流程提交后增加占用额度、减少可用额度

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/b509ed241a13ea839c428201dae8d2f4.jpg)

4.4：如果审批中退回发起人节点，利用动作流流程触发、内置多次执行、修改表单数据实现减少占用额度、增加可用额度；

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/4a1122cf627123ed29c3de1a8ca357e9.jpg)

4.5：流程归档后，利用动作流流程触发、内置多次执行、修改表单数据实现减少占用额度、增加已用额度

