---
aliases: ["1969295896646615167"]
title: 借款还款精细化管理
created: 2025-07-15
modified: 2025-07-15
tags: ['e-builder']
theme: e-builder
---

**一、 方案背景**

借款管理是企业管理中常用的业务之一，员工通过借款申请发起借款，生成借款台账。后通过借款还款单发起还款、也可以通过差旅费报销单发起借款冲销。管理人员可通过借款台账查看借款、还款信息。

**二、设计思路**

设计的核心有两点，第一点是借款台账信息生成，即什么情况下生成台账信息以及什么情况下更新借款台账；第二点是对于还款发生时，如何动态更新借款台账的还款中金额、已还款金额、待还款金额信息，并在系统留痕，便于后期的审查和管理。

对于第一点，通常是在借款申请审批通过之后，借款台账不存在借款人信息的情况下，新增借款人借款台账信息，如果借款台账存在借款人信息，则更新借款人借款金额、待还款金额。

对于第二点，借款还款单和差旅费报销单通过关联借款台账信息，将相关信息带入还款单和差旅费报销单中。 借款还款和差旅费报销单提交时校验还款或冲销金额不能大于待还款金额，提交后增加还款中金额、减少待还款金额；如果审批中退回发起人节点，则减少还款中金额、增加待还款金额；流程审批通过后减少还款中金额、增加已还款金额。

![](260fb4580c83045564237f7a7ee91e91.jpg)

**三、 搭建过程**

**1、搭建借款申请和借款台账单据**

借款申请单关键字段为借款人、借款日期、借款金额、借款人存储等，借款人存储（将选择的借款人人员字段赋值为文本存储，新增到借款台账，方便后续关联还款单、报销核销单显示使用）。

![](053c648edb4b52f3cfe1ed4b3d26f4d8.jpg)

借款台账关键字段为借款人、借款金额、借款人存储、还款中金额、已还款金额、待还款金额等字段。其中还款中金额、已还款金额、待还款金额根据借款还款单、差旅费报销单中的还款金额、核销金额时时更新。

![](d3b82f1e1d6198a98db3aa3a4f6e88d0.jpg)

**2.创建借款申请流程，设计流转路径和节点附加操作**

![](6dc91e11c55816a919de85d3922910e9.jpg)

**3.动作流实现借款台账数据新增或修改**

利用动作流流程事件触发和修改表单数据，判断借款人信息是否在借款台账存在，借款台账不存在借款人信息的情况下，新增借款人借款台账信息，如果借款台账存在借款人信息，则更新借款人借款金额、待还款金额。

![](fbb6ecb6b47fc309d0244f59c8e3f0f9.jpg)

实现效果如下图所示,借款申请审批归档后如果借款台账不存在借款人信息，新增借款人借款台账信息，如果借款台账存在借款人信息，则更新借款人借款金额、待还款金额。

![](3e20a000ef94d91a3faf7d79f61a037a.jpg)

**4.搭建借款还款、差旅费用报销单据**

借款还款单关键字段为借款金额、待还款金额字段、本次还款金额字段；其中借款金额eb字段，关联借款台账，待还款金额关联表字段，选择借款金额后自动赋值；本次还款金额使用动作流校验，本次还款金额不能大于待还款金额

![](89d6418494401be4df3072b384e1cf9f.jpg)

差旅费报销单关键字段为是否冲借款、借款人、借款金额、待还款金额字段、本次冲销款金额字段；借款人、借款金额、待还款金额字段、本次冲销款金额由是否冲销判断是否显示；其中借款人为eb字段，关联借款台账，借款金额、待还款金额关联表字段，选择借款人后自动赋值；本次冲销金额使用动作流校验，本次冲销金额不能大于待还款金额

![](0334258e854a1b4d8f76b97871ca7d76.jpg)

**5.搭建借款还款、差旅费用报销流程和附加节点操作**

![](51642e6c8368d80345ed888cd81a068e.jpg)

**6、动作流实现还款金额、冲销金额校验以及借款台账数据更新**

添加动作流点击按钮实现单据保存、保存并新建、编辑保存时执行前触发校验规则；添加内置分支添加判断条件：本次还款金额大于待还款金额（差旅费报销添加本次付款金额大于报销总金额）；添加内置页面交互实现提醒内容输出和阻止后续操作

**![](08e7d8e71c39c34fc5fe5e9374000490.jpg)**

**![](c247be6ecaa62541fc26b5878064a201.jpg)**

借款还款单流程到达某一节点时触发动作流，搭配修改表单数据实现借款台账还款中金额增加、待还款金额减少；差旅费报销同理

**![](b316a91178f68a37b3c26bf9bead5437.jpg)**

借款还款单流程退回发起人点时触发动作流，搭配修改表单数据实现借款台账还款中金额减少、待还款金额增加； 差旅费报销同理

**![](3549ffe270258b718ad607a319d250c5.jpg)**

借款还款单流程到达某一节点（一般是最后一个节点）时触发动作流，搭配修改表单数据实现借款台账还款中金额减少、已还款金额增加； 差旅费报销同理

**![](f264f4db289e955a0c6601d2342d15a6.jpg)**