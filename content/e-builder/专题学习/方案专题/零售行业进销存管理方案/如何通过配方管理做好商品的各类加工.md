---
aliases: ["1969157349355341311"]
title: 如何通过配方管理做好商品的各类加工
created: 2025-07-15
modified: 2025-07-15
tags: ['e-builder']
theme: e-builder
---

**一、** **方案背景**

库存商品的二次加工处理一方面可以整合商品资源，提高企业的生产制造能力，另一方面也能够为商品提供多元化的销售路径，从而提高企业经济效益。但是商品的二次加工过程繁琐，在商品加工方式、原材料调拨、损耗计算、成品入库等方面都需要做到精确地掌握。基于上述情况，我们在进销存管理中增加商品加工模块，对商品的配方与加工后的库存变动做到精细化管理，帮助企业做好商品的各类加工管理。

**二、** **设计思路**

设计的核心主要有两点：

1.依据配方管理中成品与原材料的配比自动进行公式计算；

2.成品与原材料的增加/减少会时刻影响库存信息的变化。

公司可以依据自己的实际情况设置商品加工配方，之后在商品加工时选择该配方，输入需要加工的成品数量，公式会自动计算出需要多少数量的各类原材料，并在加工完成后对库存信息进行修改，同时生成库存变动记录。此外，一些种类的成品也可以重新拆分成原材料，并同样修改库存信息，生成变动记录。

**![](404e5b90d1ee7c69306fd83dfadba38b.jpg)**

**三、** **搭建过程**

**1.搭建配方定义表单，录入配方信息**

配方是本场景中的关键信息，在商品的加工/拆解时，都要依据配方进行对应的数据处理。在搭建配方定义表单时，我们需要考虑到所需的原材料种类数量与最后的成品数量之间的对应关系，例如“3份原材料A与4份原材料B生成2份成品C”；此外，现实中有些成品滞销后可以分解成原材料，因此在配方定义表单中可以设置对应的下拉框，用来区分该配方的中的成品是否支持分解。

![](c618c8a5f8d745508ff8bafaeb71a833.jpg)

**2.商品加工，公式自动计算**

在配方信息录入完成后，我们可以进行商品加工信息表单的填写，在该表单中，我们在主表中需要填写三个关键信息：选择配方、输入加工次数、选择存放的仓库。

当我们选择配方（关联e-Builder字段，关联配方定义表）之后，通过对主表以及明细表字段设置关联表字段，自动带出相应的成品信息 以及明细表中的原材料名称等信息：

![](d1413bb1a82d4214109ec21d4e5d9f4e.jpg)

之后输入加工次数，配方记录的是加工一次制成以及消耗的各类数量，填写加工次数后，利用运算组件可以自动计算生成的成品数量以及理论上消耗的原材料数量：

![](342c298f5d850f737bee22fb2fdbd22b.jpg)

在原材料选取明细表中，当前只带出了原材料名称以及制成消耗的数量，在实际的库存中，相同的物品可能会存放于多个仓库中，每个仓库都有该物品的编码。所以我们需要手动选择需要使用哪个仓库的库存，此处利用字段的数据过滤，使得选取的库存的商品名称等于需要的材料名称。

![](555a58e3a7f291084c2515b1ddcf80ec.jpg)

利用公式计算出理论损耗后，工作人员填写生产过程中的额外损耗，最后得出原材料的实际损耗，最后填写成品放入的仓库，完成一整张商品加工信息单的填写：

![](5b14ffe62a480a7e84ca33ba9a75064c.jpg)

**3.修改库存信息，生成库存变动记录**

在商品加工表单填写完成并经过流程审批后，需要对库存的信息进行调整，同时生成一条库存变动记录（进销存管理中，库存的每一次变动都会生成一个变动记录，从而实现库存的实时监控）。

在商品加工过程中，成品入库，数量增加，同时生成一条库存变动记录：

![](cb0f575e8022fe820f7706a6c29bb5b3.jpg)

原材料消耗，数量减少，同时生成一条库存变动记录。这里需要注意两点：首先原材料是存储在明细表当中，明细表数据修改主表信息，需要使用多次执行；此外，原材料是库存中已有的物品，所以在字段赋值时，其他字段都保持原值，只需要减少库存数量即可。

![](ffbcfafefea01f66a546ed4a56b973fd.jpg)

**4.部分种类的商品支持拆解成原材料**

由于商品滞销或一些其他原因，我们可以将支持分解的商品依据配方重新拆分成原材料，拆解的过程与合成相似，但是存在以下几点不同：

首先是商品拆解只能选择可拆解的配方，在商品拆解表单中，关联字段选择配方设置了数据过滤条件：

![](699331d874b911fdf32791bfa9423b96.jpg)

其次在拆解过程中，成品的库存数量不能小于本次拆解，否则表单无法提交，并进行提示，可以利用动作流条件分支实现：

![](b8664817ea3efb95533b15c39c443380.jpg)

最后利用动作流修改库存信息并生成库存变动记录，此时修改库存信息时，成品数量减少，原材料数量增加。

**总结：**通过上述配置即可完成在进销存管理中，通过配方对各类商品进行二次加工，记录加工全过程，并对库存信息进行实时更新，从而提升企业的数字化运营管理能力。