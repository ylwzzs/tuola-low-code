---
aliases: ["1970848111922209399"]
title: S3协议对象存储配置
created: 2025-07-14
modified: 2025-07-14
tags: ['基础模块']
theme: 知识文档
---

# **S3协议对象存储**

## 1. **nacos配置（eteams-storage-service.properties）**

l 若配置已存在，则进行修改，若配置不存在，则需要进行新增

# 存储策略

storage.server=s3

# s3协议存储账号

s3.accessKeyId=

# s3协议存储密码

s3.secretAccessKey=

# s3协议存储-存放业务物理文件桶名

s3.bucket=

# s3协议存储-是否将桶名作为作为访问链接路径，建议为true（false: 桶名作为子域名使用）

s3.pathStyle=

# s3协议存储-region (如果不清楚这个参数是什么，请随便填写一个非空字符串)

s3.region=

# s3协议存储地址Host（需要包含协议头http/https）

s3.storageHost=

# s3协议存储-存放静态文件桶名 (静态文件桶需要开启匿名访问)

s3.static.i18n=

eg.

s3.accessKeyId=xxxxxxxxxx

s3.secretAccessKey=dUC8GtwuxxxxxxxxxxxxxxxxwSq1RF1

s3.bucket=wearelease-e10

s3.pathStyle=true

s3.region=e10-wearelease-shanghai

s3.storageHost=http://minio.weaverdoc.com:5051

s3.static.i18n=wearelease-e10-static

## 2. **静态资源nginx配置**

l 若配置已存在，则进行修改，若配置不存在，则需要进行新增

l ${weaver.env}可以从配置文件 weaver.properties 中查询

l 修改好配置文件后，需要重启nginx

l ${s3.storageHost} ${s3.static.i18n} 可以从配置文件eteams-storage-service.properties中查询

2.1. **国际化模块静态文件访问**

location /static/public/resource/i18n {

proxy\_pass ${s3.storageHost}/${s3.static.i18n}/static/public/resource/i18n/${weaver.env};

}

2.2. **云商店模块文件访问**

location /ecodestatic {

proxy\_pass ${s3.storageHost}/${s3.static.i18n}/ecodestatic;

}

2.3. **通用静态文件访问**

location /visitstatic {

#云端：

proxy\_pass ${s3.storageHost}/${s3.static.i18n}/visitstatic/${weaver.env};

}

# 必须在网关的 location 之前

location /api/file/visitstatic/ {

proxy\_pass ${s3.storageHost}/${s3.static.i18n}/visitstatic/${weaver.env};

}