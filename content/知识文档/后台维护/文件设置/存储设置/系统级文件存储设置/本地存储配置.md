---
aliases: ["1970848097499609391"]
title: 本地存储配置
created: 2025-07-14
modified: 2025-07-14
tags: ['基础模块']
theme: 知识文档
---

# **本地存储**

## 1. **nacos配置（eteams-storage-service.properties）**

l 若配置已存在，则进行修改，若配置不存在，则需要进行新增

# 存储策略

storage.server=local

# 必填：本地存储文件存放的磁盘根目录,如果是集群/多节点，需要挂载nfs共享磁盘

local.rootPath=

# 必填：本地存储文件访问地址（带有协议头：http/https）

local.download.host=

# 选填：本地存储静态文件存放的磁盘根目录

local.static.i18n=

eg.

local.rootPath=/nfs/data

local.download.host=https://weapp.yunteams.cn

## 2. **静态资源nginx配置**

l 若配置已存在，则进行修改，若配置不存在，则需要进行新增

l ${weaver.env}可以从配置文件 weaver.properties 中查询

l 修改好配置文件后，需要重启nginx

l ${local.rootPath}可以从配置文件eteams-storage-service.properties中查询

2.1. **国际化模块静态文件访问**

location /static/public/resource/i18n {

alias ${local.rootPath}/static/public/resource/i18n/${weaver.env};

}

2.2. **云商店模块文件访问**

location /ecodestatic {

root ${local.rootPath}/;

}

2.3. **通用静态文件访问**

location /visitstatic {

alias ${local.rootPath}/visitstatic/${weaver.env}/;

}

# 必须在网关的 location 之前

location /api/file/visitstatic/ {

alias ${local.rootPath}/visitstatic/${weaver.env}/;

}