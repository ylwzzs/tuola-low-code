---
aliases: ["1972317336066054985"]
title: 采购清单明细按供应商分组分别发起采购订单
created: 2025-07-15
modified: 2025-07-15
tags: ['ESB中心']
theme: ESB中心
---

1.编写目的

在采购管理中内部采购审批流程可同时对多家供应商的产品采购发起审批，审批通过后需要根据供应商对采购明细进行分组，针对每个供应商单独发起采购订单流程。其中供应商数量和信息都是动态变化的，无法通过数据筛选依次分离出指定供应商的产品明细，本期讲解如何通过数据汇总实现明细数据动态分组。

![](e805ecd7b049771151e802ca5a884cc7.jpg)

![](51c5cb74f8da0ff29a699f9306fc96f4.jpg)

2.思路分析

对数据集进行分组处理时如明确知道分组数量和分组信息（如分组字段是个下拉选项，选项值是固定的）可以通过数据筛选+条件分支组件实现数据分组处理，若像本期场景一样分组数量和分组信息不固定，可以通过数据汇总组件实现按照指定字段进行动态分组处理。

3.操作步骤

3.1设计采购审批和采购订单的流程表单和流程审批过程

![](351089a21264f6da959c1665a010acf1.jpg)

![](1ae14007c07afacdca310c004aa04b3c.jpg)

3.2新建动作流进行明细表数据分组和流程批量创建

新建动作流，触发事件为采购审批流程正常归档的时候

![](d1dd58cb75c5167fa749335b731f8e6d.jpg)

![](e29c23cd39abe5bfbaf3e516f62cb701.jpg)

![](79522d5e7f5057913d53067f898a95d9.jpg)

更换执行组件为数据汇总，汇总数据集为触发组件流程表单的明细表![](3c6a61a896abc13a91921d4c71cf61d3.jpg)

![](5ec8d6f57f8297c38084bd2dc2f9d96a.jpg)

![](a112a5bcaa1c23962bc222770f1b72f4.jpg)

![](f237ca8fa13dc783ef5169e95a700898.jpg)

添加分组字段为供应商，汇总方式为子集，汇总字段为剩余明细表字段

![](ea531e99f61d5b40ef32c8c066ef937c.jpg)

![](37277184cc915d0dd756a37553f198d3.jpg)

添加循环组件，根据分组结果即每个供应商的采购产品明细发起采购订单流程，循环方式为指定数据，明细数据为数据汇总组件result【全部】

![](2265b09011ea6fe179f2a54b354088b9.jpg)

循环内添加新建流程组件，依次发起采购订单流程

![](06ab72d4633aad57a7a5fe143b9c634d.jpg)流程表单数据配置，供应商选择上下文循环组件数据-供应商，关联采购需求选择上下文流程触发eb数据id（右上角参数类型切换到流程数据可以看到），采购清单明细表依据值为上下文循环组件数据-子集，明细表字段为依据值下级即子集的对应字段

![](5786d71ea9d997c8b2f27dada4a2fe4a.jpg)

![](7eabe65739b5ea4bef45168db593f73c.jpg)

保存动作流配置即可实现采购审批流程对多家供应商采购明细进行审批，审批通过后根据供应商对采购明细进行分组针对每个供应商为其单独创建采购订单流程。