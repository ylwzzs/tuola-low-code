---
aliases: ["1973131489850642520"]
title: 如何实现流程表单自定义浏览框选择第三方接口数据
created: 2025-07-15
modified: 2025-07-15
tags: ['ESB中心']
theme: ESB中心
---

**1.编写目的**

e10系统集成第三方的场景中经常出现系统表单需要通过浏览字段关联第三方接口数据的情况，如用印审批流程当中，需要通过用印类型字段选择第三方接口提供的印章类型并带出每种类型的印章用印审批人作为用印审批节点的操作者。本期内容将会为讲解如何设置关联浏览字段浏览第三方接口查询数据，并将第三方人员信息转换成e10系统人员字段。

![](eabca498f41d05e8114ab59d14259f9d.jpg)

---

**2.实现思路**

表单字段浏览选择第三方接口查询数据，主要通过以下三个步骤实现：

（1）获取第三方数据：e10系统主要通过【连接器】维护第三方接口调用方式，参考第三方提供的接口文档配置接口域名、请求地址、请求方式、输入参数和输出参数的格式等，其后通过【动作流】调用维护好的连接器接口映射输入参数，输出响应结果。

（2）自定义浏览类型：e10表单引擎提供了丰富的标准化字段，其中包含多种关联类型可关联其他模块的数据，若关联对象超出标准关联字段包含范围，可【通用设置-自定义浏览框设置】添加自定义浏览框，若想浏览第三方接口数据，自定义浏览框的数据源可选择【业务模块】分类下的【动作流】，动作流中调用接口查询数据。

（3）新建关联浏览字段：设计表单时添加【关联浏览】字段，浏览类型选择自定义浏览框下步骤2创建的浏览类型，可通过表单设置的【浏览数据定义】功能将表单中的其他字段值传入动作流进行数据查询范围限制。

---

3.操作步骤

3.1参考接口文档配置用印类型查询连接器

在平台引擎-ESB中心-连接器新建连接器，创建连接，连接地址维护到域名/IP地址即可；新建接口，接口地址维护域名后的内容包括“/”符号；按照接口文档的参数格式和命名要求维护请求参数和响应参数，如当前示例接口支持按照分页页码和每页条数分页查询数据。返回多条主表+明细表的数据。连接器维护完毕后必须处于发布状态才能在动作流中使用。

![](481aa340453e85aee98906e50158d370.jpg)

![](3fdda377bab1ef29bb95b9713b2d610c.jpg)

![](884deb61b8a63673a9d3cb66274cc05d.jpg)

![](aac7a99560394201890f4e919b985933.jpg)

![](f33acd1c0cb5ee752a66937e9b63b94c.jpg)

3.2创建自定义触发动作流请求用印类型作为自定义浏览框的数据源

整体动作流配置：

![](d7b35b7afff6d46ceef16012df76c5f7.jpg)

分解配置分析：

创建【自定义触发】动作流，设置输入参数，其中pageSize和pageNo是关联浏览组件翻页功能预留的保留字，控制分页请求的每页条数和分页页面，有关联浏览使用时自动传值，这两个参数不能修改参数名称！！！若该浏览框需要直至快捷浏览和查询面板快捷搜索，需要另外添加一个快捷搜索字段。

![](eb5a90c334583ac1ab0c3b35d437f4d5.jpg)

![](3b896935e4f25429f50a789e33fe7722.jpg)

从连接器（应用）分组下选择使用印类型查询接口，输入参数分页页码和每页条数动态赋值为触发节点的输入参数值。

![](c092b56fe2f7f98d70b7b547d22ab386.jpg)

本场景当中返回多条主表+明细表的数据，每种印章类型的审批人信息存储在明细表中，除了主表的印章编号和印章类型外我们需要获取明细表中的审批人工号，当前自定义触发的输出组件不支持输出明细下嵌套明细的格式，我们需要对接口响应数据做一些处理，把每个印章类型的审批人明细表中的审批人工号提取成一个主表数组字段从而实现明细降级。![](c8f78e71a846814e25fca4d57eceda0e.jpg)

因为数据格式转换完毕后还要根据快捷搜索关键字进行筛选不能直接输出，我们另外创建个自定义触发动作流进行明细降级格式转换，嵌套在用章类型动作流中。![](c8397be10e74ccc1f53083781a93c744.jpg)

![](6af2766dec6d1a54263d6ea0e418e490.jpg)

添加【筛选数据】组件对降级处理后的数据根据快捷搜索关键字进行模糊查询，注意这里的逻辑关系选择包含，不然关键字为空时查不出全部数据。![](b947f43ae03702ee57897d9a76f42b3e.jpg)

输出用印类型筛选结果，主表字段返回浏览数据总数，参数名称是保留字total，关联浏览按钮根据数据总数和每页条数自动计算分页总条数，该参数名称不能修改成其他！！！，有快捷搜索关键字和无关键字时浏览数据总数计算方式不同可通过if函数嵌套，若关键字为空，那数据总数就是接口返回响应参数的原始数据条数，反之为筛选结果的条数。![](5ed9658b67e876e77091324bacf6e90a.jpg)

输出组件的明细表输出用印类型查询结果的具体字段信息，依据值选择筛选数据响应参数的数据集，通过依据值下级分别输出印章类型、编号和审批人工号数组。

![](06723cc51ca52996b202d438fae772c3.jpg)

3.3通用设置添加自定义浏览框

在【后台管理中心-通用设置】新建【自定义浏览框】，数据来源选择【业务模块-动作流】-上一步骤的自定义触发动作，印章类型为标题栏字段，印章编号为主键字段，自定义输入参数字段印章类型为快捷搜索字段（为什么输出字段印章类型设为标题栏后被默认设置为快捷搜索字段但是还要自己手动添加输入参数字段设为快捷搜索字段？因为数据来源为动作流时暂未支持按照默认的快捷搜索字段查询数据。）

![](8bb6e045c983acd4c48d85fd8f6c8bf8.jpg)

![](24518cb25d5cd0ca861ce107c267cb9a.jpg)

3.4设计用印审批流程，添加关联浏览字段引入第三方接口数据

表单设计器上添加【关联浏览】字段，浏览类型选择自定义浏览框中上一步骤添加的浏览类型，根据实际需求决定是否启用单选。

![](e8b73cc7ed194fb4ba226abb9ee22c57.jpg)

3.5如何实现根据用印类型确定用印审批节点的操作者

首先第三方系统的组织人员唯一标识编码和e10系统的人员唯一标识编码即常说的数据ID绝大多数场景下不一致，而流程的操作者需要设置成系统人员，因此需要根据唯一匹配映射规则将三方人员信息转化为系统人员，如当前场景中需要将接收到的审批人工号转化成系统人员id存储在人员选择字段中，可以在表单设计器中添加辅助字段存储人员工号原始文本，该字段在选择用印类型时自动关联填充。

![](f09b3d089b0a1c05d6b5d2699fa3012f.jpg)

在流程的提交节点增加节点附加操作，查询HRM人员表中对应工号的人员id，查询结果保存到流程的审批负责人字段，流程用印审批节点的操作者设置为表单字段审批负责人。![](a4aa632bf9ec1783f2ee812745974303.jpg)

![](a359282767a1f43e5465c46cf6d7eeca.jpg)

![](267e83e2d56cd833c453add118de5685.jpg)