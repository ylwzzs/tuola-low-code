---
aliases: ["1967818688920132001"]
title: 内置-多次执行
created: 2025-07-15
modified: 2025-07-15
tags: ['ESB中心']
theme: ESB中心
---

**1.场景说明**

如【进销存订单管理】应用中，通过入库单新增商品库存，商品编码和入库仓库一致则进行商品库存更新，不一致则新增商品库存信息

展示效果如下：

![](580ce8b4eaf5a5bc2277ff5c92589a6b.jpg)

**2. 功能简介**

本场景所使用的动作流是利用【触发事件】--【点击按钮时】触发，因新增或修改的数据是一条或多条，故使用【内置】--【多次执行】--【LEN\_ARRAY】执行动作，配置LEN\_ARRAY函数。并增加【修改表单数据】动作，开启【条件不满足时新增】按钮。

**3. 操作说明**

（1）首先选择【触发事件】--【点击按钮时】触发，配置对应应用和表单，选择其触发按钮为新增类型按钮（新建保存、保存并新建、批量新增以及导入），并选择其触发位置为执行后，触发类型为依次触发。

![](53804250cbf76f707b717d3a282fbabf.jpg)

（2） 添加【内置】--【多次执行】执行动作

![](cc0f569459d05ad064178f980f7fabd4.jpg)

因新增或修改的数据是一条或多条，所以这里添加LEN\_ARRAY函数，并将表单中对应字段后的条件设为“全部”，进行多次执行操作配置。

![](1e369aa7c5f5a73591b5a94563e8dba5.jpg)

（3） 添加【标准应用】--【修改表单数据】执行动作。

![](16428332dc46d5659db564e6a26e43fe.jpg)

修改表单数据执行动作要包含在【内置】--【多次执行】执行动作里面。

![](a534a1cd17511e04b308d3e1b4f96f96.jpg)

选择要执行的应用、表单、操作人设置为动态赋值选择当前用户；因商品编号、所属仓库一致才更新，所以类型选择按条件更新；并开启条件不满足新增数据，达到满足条件更新数据，不满足条件新增数据

（4） 设置表单数据，因库存是满足条件时累加，所以库存配置为=+

![](e5713e26012cb3a04ddaf15c1bb12474.jpg)