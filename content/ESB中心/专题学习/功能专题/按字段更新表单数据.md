---
aliases: ["1969234894793915066"]
title: 按字段更新表单数据
created: 2025-07-15
modified: 2025-07-15
tags: ['ESB中心']
theme: ESB中心
---

**1.** **场景说明**

数据的联动更新是智能化操作系统中一项不可或缺的功能，其目的以依据关键信息作为条件，从而检索出对应的数据信息并进行修改更新，从而保证数据的实时同步。例如在销售管理中，我们需要申请对商品的销售价格进行调整变动，申请通过后，对应的销售价格进行更新；此外，我们也需要根据市场的变化与经济走势申请调整各部门最新的销售目标。

动作流更新商品销售价格展示效果：

![](ae3835ccf7e8ba809afbab08f512fb0f.jpg)

动作流更新部门销售目标展示效果：

![](ba0b871875ec6ba735e0dae6f4f9d61c.jpg)

**2.** **功能简介**

在动作流中，我们提供多种数据更新类型，不同的更新类型适用于不同的场景，本期我们主要讲解如何按字段更新表单数据，完成上述的销售场景。由于数据存在一对多的情况，所以系统提供了五种更新策略：

① 更新全部数据：只要数据符合更新条件，所有的数据都会更新；

② 更新第一行数据：多条数据都符合条件，只更新“创建时间”最早的那一条数据；

③ 更新最后一行数据：与上一条相反，只更新“创建时间”最晚的那一条数据；

④ 仅更新单独对应数据：若按条件发现对应多条数据，则不执行更新操作，只更新单独对应的数据；

⑤ 仅全部数据单独对应时更新：在执行更新操作之前，系统会检索被更新表单中的全部数据，只有所有数据的条件字段是唯一无重复的，才会进行更新。

![](36189a63d5f35e752acd2ce6f793284c.jpg)

**3.** **操作说明**

**1.**商品价格调整，更新全部数据**

首先我们需要搭建“商品库存信息表”与“价格调整申请表”，在商品库存信息表中我们可以发现，一件商品会存放在多个地区的仓库中：

![](20e6e1399a90f1ea93b84a236d95b9b5.jpg)

此时我们想在价格调整申请表中，选择对应的商品，设置调整价格，审批通过后修改该商品的所有库存价格。我们选择流程触发，执行动作为更新表单数据，此时我们选择更新方式为按字段更新，并更新全部数据：

![](ae19425f766bebad9e75ca9f9f8fcabd.jpg)

此时我们看一下依据值的设置，注意：主表的依据值不是必填项，设置依据值可以帮助我们更快的进行表单数据赋值，例如在下图中，我们设置了依据值为“价格调整申请”这张表：

![](830cdb6bdf5d39ecc232402ef4cf61bc.jpg)

设置完成后，我们可以在表单数据的设置时，使用依据值下级找到“价格调整申请”这张表内的字段进行赋值；如果不设置依据值，那么直接使用动态赋值也能达到同样的赋值效果。

![](defbf1218e33738b1214d00b8064e608.jpg)

之后是更新条件，当我们选择按字段更新之后，更新条件中就可以取到被更新表单的字段信息，我们可以将单个或者多个字段作为更新条件（如果是多个字段，则多个字段之间是“and”的条件关系）。在本场景中，我们将字段“商品名称”作为更新条件，目的是用新的价格修改原有价格。此时我们来看一下表单数据设置：

![](98c0bf3358a66a3d17ffa754cda517bc.jpg)

在表单数据设置中，其他字段保持原值，销售价格更新为调整价格。需要注意的是：此时的“商品名称”字段，已经作为了一个更新条件字段，这一行不再作为赋值使用，而是作为一个条件，如果选择了多个字段，那么这些字段都只作为条件，并不能为这些字段赋予新的值。

动作流设置完成后，点击价格调整申请，变动效果如下：

![](544a2605625bd45914333c705ee8c97b.jpg)

**2.**销售目标调整，更新最后一行数据**

在各部门设立销售目标后，有时会根据实际情况调整销售目标，由于每个部门有许多历史销售目标，如何自动找到最新制定的销售目标并进行更新呢？此时就可以利用我们字段更新的“更新最后一行数据”功能：

首先我们搭建“销售目标表”与“目标调整申请表”，在销售目标表中我们可以发现，一个部门在每一年都会制定销售目标：

![](56760720eef5aab4f0c44d6c0f402753.jpg)

当需要调整销售目标时，我们提交目标调整申请，审批通过后修改当前年的目标，此时动作流可以做如下配置：

![](6faf49668b76b99fbb17e5767695dab4.jpg)

在场景中，我们需要更改最新一年的销售目标，往年的不用改变，所以选择创建时间最晚的，也就是更新最后一行数据。

最后的配置效果如下：可以发现，在销售目标调整申请通过后，只改变了“销售部”最新的销售目标数据：

![](a45ebb7336f4b43db396bb422df1049c.jpg)