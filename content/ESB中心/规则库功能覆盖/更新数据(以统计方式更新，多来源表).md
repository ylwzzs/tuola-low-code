---
aliases: ["1966830354988260018"]
title: 更新数据(以统计方式更新，多来源表)
created: 2025-07-15
modified: 2025-07-15
tags: ['ESB中心']
theme: ESB中心
---

场景一：更新B表价格字段，B表价格字段是从A表价格字段统计后赋值给B表的，A、B表通过关联浏览按钮字段进行关联

规则库实现配置：

![](0a0b2ce1eac1367d2388681dd3ae1475.jpg)

动作流实现配置：

上报创建数据触发（上报更新数据触发）+表单查询+编辑上报

![](480960e3408f2e3e0fa866dd2da0d47c.jpg)

![](517d4827fd86eda811e0aa4a2caba642.jpg)

注：

1、上报创建数据触发（上报更新数据触发）：选择A表单

2、表单查询：

数据源选择业务模块中的业务表单，然后选择A表单；

条件：左侧条件为表单查询A表中的字段，右侧选择触发组件中选择关联浏览按钮的字段值，通过查询出A表所有和触发组件中一致的数据后进行统计；

查询方式：选择分组/汇总方式；

汇总内容：选择求和，对A价格进行求和

3、编辑上报：将表单查询中A表求和的值赋值给B表的B价格字段，在上报数据设置中，B价格利用动态赋值选择表单查询的汇总内容字段即可

**场景二：多表来源查询数据统计，更新到其他表单中**；如将存在一批物资，有苹果电脑、联想电脑等不同的物资，需要将不同的物资的入库数量进行求和，再减去该物资的出库数量总和，得到该物资的库存数量更新到库存表单中。

**动作流实现配置：**

在EB中搭建三个表单，分别为物资入库表、物资出库表以及库存表，通过物资名称进行分类，对同一类的物资进行入库和出库数量的求和，然后用函数计算处其库存数量更新到库存表单的库存数量中，配置如下：

利用定时器（根据自己的需求也可以用其他触发组件）+数据源查询组件+合并数据+更新表单数据组件

![](b511b4afe6540b023e83ce8acdc469d8.jpg)

![](6c528817a79acead4f3fc94e6338726b.jpg)

![](7f2042b018440bad47b7587aa467d500.jpg)

注：

a、第一个数据源查询组件是用来统计物资入库表单的库存数量，根据物资名称进行分组，对库存数量进行求和

b、第二个数据源查询组件是用来统计物资出库表单的库存数量，根据物资名称进行分组，对出库数量进行求和

c、第三个合并数据组件是用来对入库和出库相同物资进行连接（目的：如果不加数据合并组件，只用数据源查询组件的话，两个查询组件的顺序是不一致的，做不到查入库的第一行是物资1，查出库的第一行也是物资1，所以利用数据合并数据组件，根据物资名称进行连接）

d、第四个更新表单数据组件，利用按字段更新，根据物资名称作为条件，然后利用函数对入库数量和出库数量进行计算

**动作流执行结果：**![](a9468933e545fe8b63b7d2787d30d05b.jpg)