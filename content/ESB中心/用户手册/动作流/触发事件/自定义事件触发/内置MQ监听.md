---
aliases: ["1968595310302621048"]
title: 内置MQ监听
created: 2025-07-29
modified: 2025-07-29
tags: ['ESB中心']
theme: ESB中心
---

1、【内置MQ监听】触发组件，可以监听系统内置的MQ消息。

2、设置触发组件时，需指定队列名称与模式，当前仅支持广播模式

![](https://myhelpdoc.oss-cn-heyuan.aliyuncs.com/mdimages/a45c6b910161c5ef7d74e174ceae6e90.jpg)

3、支持设置系统消息队列的参数

**场景示例：大数据量同步方案**

**思路：** 由于单个动作流同步会超时，所以通过拆解任务方式配置两个动作流去分步处理，一个动作流负责查询总页数，然后通过循环发送页数给另一个动作流，该动作流负责新增或更新每页的数据。

**主要组件：**通过内置mq发送组件发送页数数据，然后通过内置mq监听组件接收数据

动作流A: 通过数据源查询， 查询总数，然后根据总数计算出总页数，如下

![](https://wpstest.e-cology.com.cn/weboffice/api/v3/office/copy/bkRTSzJRd2h3emNPZnkyT3hUV1dPY2tkbUl5S3hWbUZFYUpRMVJSbzN0VzVvWnhzdld3cHRMVUJCdldrY3JXbE9YejJKdm9QalFydThKZStBeTIvblRZT0FmOElVZ29BcUVUVzAxQ0FPbFVhMjdjL1FObmxqOGdpKzE4OVQ3RzNBcDFVOE82dmhBeER0bzZhTlBDTlVYUnR6a0JLRmgwdDFzMjlTREd0eTZwcEd1TkFpTFdRUDZNUnRyV3lIMEZ4Y1pjZmU2T21GckpVSGNSZzNRNHJ1M1ZXV1A3QTFyVU9ZSWdKbGtPclFCUXFEQmJvelU1NU9JbjZWSkJ2K0JsUXZnL2NuNHh4czBtQXk1bkQ5RHZEdDNQWE9IYU56ZFEzelFRaXhra0sxd3UvMXh4WmlVc1ZyWEYxNUVDM0xQTmZzcWs9/attach/object/41556f115c23a174ba2cdb47b8662168ac21ef79?__doc_route_key=0)

![](https://wpstest.e-cology.com.cn/weboffice/api/v3/office/copy/bkRTSzJRd2h3emNPZnkyT3hUV1dPY2tkbUl5S3hWbUZFYUpRMVJSbzN0VzVvWnhzdld3cHRMVUJCdldrY3JXbE9YejJKdm9QalFydThKZStBeTIvblRZT0FmOElVZ29BcUVUVzAxQ0FPbFVhMjdjL1FObmxqOGdpKzE4OVQ3RzNBcDFVOE82dmhBeER0bzZhTlBDTlVYUnR6a0JLRmgwdDFzMjlTREd0eTZwcEd1TkFpTFdRUDZNUnRyV3lIMEZ4Y1pjZmU2T21GckpVSGNSZzNRNHJ1M1ZXV1A3QTFyVU9ZSWdKbGtPclFCUXFEQmJvelU1NU9JbjZWSkJ2K0JsUXZnL2NuNHh4czBtQXk1bkQ5RHZEdDNQWE9IYU56ZFEzelFRaXhra0sxd3UvMXh4WmlVc1ZyWEYxNUVDM0xQTmZzcWs9/attach/object/16e966364d963f5f5161397e7cece64fbdd9f11b?__doc_route_key=0)

**计算页数**：

![](https://wpstest.e-cology.com.cn/weboffice/api/v3/office/copy/bkRTSzJRd2h3emNPZnkyT3hUV1dPY2tkbUl5S3hWbUZFYUpRMVJSbzN0VzVvWnhzdld3cHRMVUJCdldrY3JXbE9YejJKdm9QalFydThKZStBeTIvblRZT0FmOElVZ29BcUVUVzAxQ0FPbFVhMjdjL1FObmxqOGdpKzE4OVQ3RzNBcDFVOE82dmhBeER0bzZhTlBDTlVYUnR6a0JLRmgwdDFzMjlTREd0eTZwcEd1TkFpTFdRUDZNUnRyV3lIMEZ4Y1pjZmU2T21GckpVSGNSZzNRNHJ1M1ZXV1A3QTFyVU9ZSWdKbGtPclFCUXFEQmJvelU1NU9JbjZWSkJ2K0JsUXZnL2NuNHh4czBtQXk1bkQ5RHZEdDNQWE9IYU56ZFEzelFRaXhra0sxd3UvMXh4WmlVc1ZyWEYxNUVDM0xQTmZzcWs9/attach/object/ef824bc964a880802f3366d9cfeb91014812bd2c?__doc_route_key=0)

内置mq发送页数

![](https://wpstest.e-cology.com.cn/weboffice/api/v3/office/copy/bkRTSzJRd2h3emNPZnkyT3hUV1dPY2tkbUl5S3hWbUZFYUpRMVJSbzN0VzVvWnhzdld3cHRMVUJCdldrY3JXbE9YejJKdm9QalFydThKZStBeTIvblRZT0FmOElVZ29BcUVUVzAxQ0FPbFVhMjdjL1FObmxqOGdpKzE4OVQ3RzNBcDFVOE82dmhBeER0bzZhTlBDTlVYUnR6a0JLRmgwdDFzMjlTREd0eTZwcEd1TkFpTFdRUDZNUnRyV3lIMEZ4Y1pjZmU2T21GckpVSGNSZzNRNHJ1M1ZXV1A3QTFyVU9ZSWdKbGtPclFCUXFEQmJvelU1NU9JbjZWSkJ2K0JsUXZnL2NuNHh4czBtQXk1bkQ5RHZEdDNQWE9IYU56ZFEzelFRaXhra0sxd3UvMXh4WmlVc1ZyWEYxNUVDM0xQTmZzcWs9/attach/object/d44ba7f35d2af411a8f9af1db877f1f1a6e6ca82?__doc_route_key=0)

**动作流B：**

负责监听动作流A发送来的页数，然后查询每页数据进行新增或更新

![](https://wpstest.e-cology.com.cn/weboffice/api/v3/office/copy/bkRTSzJRd2h3emNPZnkyT3hUV1dPY2tkbUl5S3hWbUZFYUpRMVJSbzN0VzVvWnhzdld3cHRMVUJCdldrY3JXbE9YejJKdm9QalFydThKZStBeTIvblRZT0FmOElVZ29BcUVUVzAxQ0FPbFVhMjdjL1FObmxqOGdpKzE4OVQ3RzNBcDFVOE82dmhBeER0bzZhTlBDTlVYUnR6a0JLRmgwdDFzMjlTREd0eTZwcEd1TkFpTFdRUDZNUnRyV3lIMEZ4Y1pjZmU2T21GckpVSGNSZzNRNHJ1M1ZXV1A3QTFyVU9ZSWdKbGtPclFCUXFEQmJvelU1NU9JbjZWSkJ2K0JsUXZnL2NuNHh4czBtQXk1bkQ5RHZEdDNQWE9IYU56ZFEzelFRaXhra0sxd3UvMXh4WmlVc1ZyWEYxNUVDM0xQTmZzcWs9/attach/object/1026d1868ddea24a0e521df6cc68611e27b1fc46?__doc_route_key=0)

![](https://wpstest.e-cology.com.cn/weboffice/api/v3/office/copy/bkRTSzJRd2h3emNPZnkyT3hUV1dPY2tkbUl5S3hWbUZFYUpRMVJSbzN0VzVvWnhzdld3cHRMVUJCdldrY3JXbE9YejJKdm9QalFydThKZStBeTIvblRZT0FmOElVZ29BcUVUVzAxQ0FPbFVhMjdjL1FObmxqOGdpKzE4OVQ3RzNBcDFVOE82dmhBeER0bzZhTlBDTlVYUnR6a0JLRmgwdDFzMjlTREd0eTZwcEd1TkFpTFdRUDZNUnRyV3lIMEZ4Y1pjZmU2T21GckpVSGNSZzNRNHJ1M1ZXV1A3QTFyVU9ZSWdKbGtPclFCUXFEQmJvelU1NU9JbjZWSkJ2K0JsUXZnL2NuNHh4czBtQXk1bkQ5RHZEdDNQWE9IYU56ZFEzelFRaXhra0sxd3UvMXh4WmlVc1ZyWEYxNUVDM0xQTmZzcWs9/attach/object/50f7b1300510d1818710e79e95d4e781978fce60?__doc_route_key=0)

**内置mq监听接收参数配置：**

