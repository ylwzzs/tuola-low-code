---
aliases: ["1974054066885690517"]
title: AI大语言模型对话组件
created: 2025-07-15
modified: 2025-07-15
tags: ['ESB中心']
theme: ESB中心
---

一、组件功能

该组件主要用于各个业务模块在动作流中进行AI大语言模型交互，可以直接连接AI连接器中搭建好的智能体和智能应用，也可以自定义模型和参数进行连接。

- 可以直接使用已搭建的 AI智能体和 应用
- 支持自定义参数配置，无需关联已有应用

![https://weapp.eteams.cn/ecodestatic/txproduction/resources/975362755035045889/1733668651-image.png](237c95e2e46616122635bacd2840ee7d.jpg)

### 二、配置项详细说明

配置方式 1：自定义配置

适用于需要完全自定义对话逻辑的场景。

| 配置项名称 | 说明 | 使用场景 |
| --- | --- | --- |
| 用户输入内容 | 用户发送的文本内容 | 动态获取用户输入，如聊天对话、表单提交等场景。 |
| 辅助信息 | 附加的信息，以JSON格式传递。 | 用于对话中附件信息传递。 |
| 选择用户 | 指定对话的用户标识，默认为当前用户 |  |
| 模型选择 | 选择对话模型，不同模型支持不同的能力与成本。 |  |
| 回答内容最大长度 | 限制模型生成内容的Token数量（如1024）。 | 控制响应长度，避免生成过长内容导致性能问题。 |
| 是否需要历史消息 | 是否将历史对话内容作为上下文传入。 | 多轮对话场景（如连续问答），需保持对话连贯性时启用。 |
| 会话标识 | 唯一标识符，用于追踪同一会话的多次交互。 | 用于关联历史对话消息 |
| 组件消息不放入对话 | 若开启，当前组件的输入/输出不会被记录到对话历史中。 |  |
| 最大消息数 | 限制对话历史中保留的消息条数（如最近10条）。 | 避免上下文过长导致模型性能下降。 |
| 提示词设置 | 自定义系统提示词，用于控制模型行为（如“用简体中文回答”）。 | 约束模型输出格式或风格，如强制简洁回答、指定语言。 |
| 函数工具 | 绑定自定义函数工具，扩展模型能力（如查询天气、调用API）。 |  |
| 指定函数名称调用 | 直接调用预定义函数的名称，跳过模型决策。 | 明确需要执行固定操作的场景 |
| 知识库类型 | 选择知识库类型（如向量知识库）。 |  |
| 匹配相似度条件 | 设置向量匹配的相似度阈值（如0.8），低于此值的结果将被过滤。 | 提高搜索结果相关性，避免返回低质量内容。 |
| 匹配数量 | 控制返回的搜索结果数量（如Top 5）。 |  |
| 使用Rerank重排序 | 对搜索结果进行二次排序，提升结果准确性。 | 搜索结果质量不稳定时启用。 |
| 重排序分数限制 | 设置重排序的分数阈值，仅保留高分结果。 | 确保最终结果的高置信度。 |
| 数据组命中后提示 | 当知识库命中时，在回答前添加固定提示语（如“根据知识库：…”）。 |  |
| 动态参数 | 运行时传入的变量参数（如 {"date":"2025-01-01"}），用于替换提示词中的动态变量占位符。 |  |

####

配置方式 2：选择AI应用

适用于快速复用已有AI应用配置的场景。

| 配置项名称 | 说明 | 使用场景 |
| --- | --- | --- |
| 用户输入内容 | 用户发送的文本内容 | 动态获取用户输入，如聊天对话、表单提交等场景。 |
| 选择AI应用 | 从已创建的AI智能体或应用列表中选择，继承其完整配置（模型、知识库等）。 | 直接使用已搭建的AI智能体和应用 |
| 是否流式输出 | 启用后以流式传输响应内容，逐步返回结果。 | 对话组件中使用 |
| 是否需要历史消息 | 是否将历史对话内容作为上下文传入。 | 多轮对话场景（如连续问答），需保持对话连贯性时启用。 |
| 会话标识 | 唯一标识符，用于追踪同一会话的多次交互。 | 用于关联历史对话消息 |
| 组件消息不放入对话 | 若开启，当前组件的输入/输出不会被记录到对话历史中。 |  |
| 最大消息数 | 限制对话历史中保留的消息条数（如最近10条）。 | 避免上下文过长导致模型性能下降。 |
| 流式输出key | 指定流式返回数据的键名，用于对话组件获取流式结果。 | 对话组件中使用 |

---