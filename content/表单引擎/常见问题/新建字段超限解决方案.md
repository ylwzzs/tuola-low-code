---
aliases: ["1972285010578145367"]
title: 新建字段超限解决方案
created: 2025-07-15
modified: 2025-07-15
tags: ['表单引擎']
theme: 表单引擎
---

**问题现象：**![](caf1f2e82111a35f890d6d0f0cbcef0d.jpg)

## **为什么会存在字段超限？**

E10默认数据库是mysql，而mysql的默认存储引擎InnoDB，其内部支持的最大行大小限制为65,535字节，这个和每个字段的类型、长度有关系，和字段个数没太大关系，所以新建字段时，应该结合实际应用场景，合理控制下每个字段的长度。

拿我们最常用的单行文本框字段举例，该字段在数据库中使用varchar类型存储，如果mysql采用utf8mb3\_general\_ci字符集规则，一个字符占用3个字节，当设置了20个单行文本框长度为999的字段，那么就占用了20\*999\*3=62937字节，在加上字段本身占用的空间，就已经接近上限了。

## **不是mysql数据库为什么也会出现超限提醒?**

因为E10有一个很强大的迁入迁出功能，当OA使用时间较长，体量变大后，很多应用都需要依赖迁入迁出来调整配置以及测试验证，这个迁移过程中，如果在一个没有字段限制的数据库给应用表单新增了过多的字段，就会面临无法迁入到存在限制的数据库环境中，给后期的维护带来更大的压力。所以我们对所有数据库做了统一的限制，希望在用户对字段进行配置时就统一约束字段规范，提前避免掉这种隐患。

## **如何避免超限？**

在新建字段时，应该结合实际使用场景设置字段的长度和类型。特别是单行文本框字段，要避免滥用100/999这种长度，必要时可以改成多行文本框字段，因为多行文本框使用的是text类型存储，text列只占用行固定大小，一般约为9到12个字节。

## **超限后如何处理？**

1、对已有字段的字段长度进行缩减优化。

2、通过新建多物理表进行新增字段（推荐）。

多物理表也是主表的一部分，只是数据库中是一个独立的数据表，不过对于用户而言是无感的，涉及字段配置的地方都可以当作主表字段进行选取。新建多物理表的示例截图如下。如果没有此按钮，可以咨询对应模块相关负责人，表单是否支持开启多物理表。

![](7a0093a0d79dd4057c808c41b2d90bb3.jpg)

3、查看字段的操作日志，检查是否有删除的字段，有的话可以在数据库将其彻底删除，删除的sql脚本可以咨询相关模块负责人。

因为目前删除字段都是逻辑删除，实际上删除的字段还存在于表中，这个后续会推出字段回收站功能，支持用户前端自定义删除。

![](22be54e7b7014c263b000f6a6fd83f9c.jpg)

## **不是mysql如何去掉超限的校验？**

我们并不推荐去掉这种校验，原因在前面讲过，会给后续的迁入迁出埋下一定的隐患，但是也可以通过调整nacos配置的方式完全去掉这种校验。在对应服务的nacos配置文件中新增配置：

**form.data.physical.checkRow=false**

然后重启对应服务即可。

PS：不知道服务是哪个nacos配置文件的，可以咨询对应模块。常见的如流程服务是weaver-workflow-core-service.properties，ebuilder是weaver-ebuilder-form-service.properties。