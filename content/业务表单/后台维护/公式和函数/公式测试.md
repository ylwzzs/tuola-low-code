---
aliases: ["1965952007245079872"]
title: 公式测试
created: 2025-07-15
modified: 2025-07-15
tags: ['表单引擎']
theme: 业务表单
---

**公式测试**

在编写公式时，用户经常面临不清楚写入的公式是否正确。对于该问题，我们提供了公式测试的功能。

点击公式名称，进入到公式编译页面，在右上角显示【测试】按钮，点击按钮后，进入到公式测试页面。

![](86838de5d0c15489c9345af6578b3029.jpg)

在公式测试弹窗中，默认会将已保存的公式内容带入。

注意：如果想使用测试功能，必须先将公式进行保存。

![](1de0fad862d7f3bb51d2df01c0148206.jpg)

①回显当前公式的引用类型和返回值类型；

②回显当前保存的公式内容；

③测试值输入区域，在这里输入当前公式涉及到的变量测试值；

④点击执行后，会在结果区域显示对应的函数执行结果，用户可以自行判断是否跟自己想要的结果一致，再进行公式内容的调整；

**公式测试**支持范围**

![](986a76b58476fb38d5f47038df8cc0d3.jpg)

如果公式中存在非以上内容的控件（如关联控件），则暂不支持测试。

**公式测试示例**

**示例1：**

写入一条公式，判断“开票日期为今天”，今天为2022.08.04。

公式内容为：{当前数据.开票日期}=TODAY()

进入到测试页面，自动获取当前公式中的变量，根据变量的类型输入对应的测试值。

注意：在选择日期控件时，要注意它对应的格式。

TODAY()函数为返回当天日期，返回格式为年月日。

而在测试值输入日期控件的时候，默认带入的是年月日时分。

**如果忘记修改控件格式，默认带入时分参数，在实际执行的时候，也会如测试结果一样，执行为“假”。**

![](ba794d99df95b180882645df333f6191.jpg)

**只有当格式和函数返回的格式一致时，才会执行为“真”。**

![](b65bfd71b83e8dd2b70ac9ebacddca8f.jpg)

**以上问题也是用户在使用公式时经常会犯的错误，在设置控件格式时，未与函数的返回格式保持一致。**

**由于不是逻辑上的问题，在保存公式时是不会被发现的，需要用户自己检查是否在使用时（表单设计器中）忘记设置了日期控件的格式或者是日期控件设置的格式不对。**

通过公式测试的功能可以快速的检查出来。

**示例2：**

写入一条公式，计算工资，工资为时薪和工时求和得出。

公式内容为：{李test.工资}={李test.时薪}\*{李test.工时}

进入到测试页面，自动获取当前公式中的变量，根据变量的类型输入对应的测试值。

注意：使用赋值公式时，必须包含赋值关系，即字段赋值公式必须存在等于号。

获取公式中进行运算的变量，输入“时薪”、“工时”的值，进行测试运算，执行后，得到返回结果。

![](038cd8fdd852857c545355b9cbbd1e59.jpg)