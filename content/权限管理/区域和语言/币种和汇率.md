---
aliases: ["1965855855869601466"]
title: 币种和汇率
created: 2025-07-15
modified: 2025-07-15
tags: ['基础模块']
theme: 权限管理
---

#### 一、**功能背景**

随着企业全球化扩张加速，跨国交易涉及多币种结算、汇率波动风险加剧及各国财税合规要求趋严，传统人工处理多币种业务效率低下且易出错，企业亟需通过系统化能力实现自动化汇率换算、多币种合规管理，最终提升跨国协作效率并降低运营风险

#### 二、**功能价值**

1、丰富的币种以及准确的汇率：支持全球主流货币的自由切换，整合外汇局、聚合数据等公共平台实时获取最新汇率

2、多币种自动化结算：支持通过OpenApi开放平台、ESB动作流、数据源查询等方式将币种和汇率数据引入到差旅、采购、报销等场景，实现金额的自动化结算

3、本地化适配：支持切换系统本位币设置，满足不同国家不同本位币种的需求

#### 三、**功能概述**

1、币种设置：本位币设置 / 币种的启用与禁用 /币种名称的修改

2、汇率设置：包含固定汇率和浮动汇率

3、固定汇率：期间汇率(期末汇率/平均汇率的维护)

4、浮动汇率：浮动汇率更新设置，可以维护浮动汇率数据源、浮动汇率同步规则以及浮动汇率更新频率；同时可以手动触发浮动汇率的更新

#### 四、**功能入口及权限说明**

1、该功能的路径为：**后台管理中心-区域和语言-币种和汇率**

2、相关设置权限系统管理员默认拥有，如需对其他角色进行授权，可在**后台管理中心-区域和语言-权限管理中心**进行设置

![](eecbe7f7e644a46a11ff3eaeea736622.jpg)

#### 五、**业务流程图**

![](9917db75b222c17666790000a3f26459.jpg)

#### 六、**功能详细说明**

1、后台设置-币种设置

（1）启用/禁用币种 ：被禁用的币种无法在币种浏览框中选择使用，如果配置了浮动汇率更新，则更新时也不会更新未启用币种的汇率数据

（2）编辑币种名称：点击编辑按钮可以自定义修改币种名称

（3）本位币设置：系统内的汇率计算规则为其他币种/本位币，按照需要设置相应的本位币即可

####

2、后台设置-汇率设置

（1）固定汇率：可以维护某个币种的期末汇率/平均汇率，如果维护的期末汇率是当前月时，会自动把期末汇率同步到最新汇率

![](7d3f05893cccfc59f359323c3d40178b.jpg)

（2）浮动汇率：

a. 自动更新浮动汇率：开启后，系统会按照配置的更新频率和时间自动触发浮动汇率更新。

b. 同步到当月期末汇率：开启后，在更新浮动汇率后，会把浮动汇率同步到当月期末汇率中。

c. 更新频率、更新时间：配合上面的自动更新浮动汇率实现浮动汇率自动更新。

d. 数据源：按照需求选择对应的数据源，具体可参考浮动汇率数据源说明文档。

![](3663bfa5c19400cf7942fa2fef623cd7.jpg)

3、币种/汇率-前台使用

此处用一个简单流程举例介绍三种汇率的应用方法，首先在表单中创建所需字段：

a. 币种：关联浏览字段-币种浏览框

b. 汇率：数字字段

c. 原币金额：数字字段

d. 最终金额：数字字段

![](5407b267501c1042a9938f94dbc32f44.jpg)

然后配置用于换算金额的函数公式联动，如下图所示，配置比较简单，此处不做详细说明

![](c6d88699d17d6d5dba1b3b316e7151fb.jpg)

**（1）**字段联动-数据源查询**（该方案只能使用单一类型的汇率，局限性比较大，请优先考虑ESB方案）

a. 在工作流设计-高级设置-字段联动中新建字段联动

b. 设置触发动作：结算币种值改变时触发

![](8a619c304012334185076377d0f7d50d.jpg)

c. 联动设置：

选择SQL可视配置，数据库不选择，使用系统数据库；数据库表选择i18n\_rate（此处以最新汇率举例，其他类型汇率对应数据库参考本段末尾备注），查询条件unit字段 = 结算币种，delete\_type = 0；赋值设置 rate字段 = 汇率字段

![](e5a9884f5cce9bd4a3833678b4107373.jpg)

d. 效果验证

在表单选择币种并填写结算金额后，可自动带出汇率并联动计算出换算后金额

![](f80ed4b77fa07a90594538cc709ec9f1.jpg)

e.汇率类型及对应表名

最新汇率：i18n\_rate

期间汇率(包括期末汇率和平均汇率)：i18n\_avgend\_rate

浮动汇率：i18n\_floatrate\_detail

f.注意事项

通过数据源查询汇率数据时，如果使用浮动汇率或者期间汇率(期末汇率、平均汇率) 需要保证客户后台有当天或者当月对应的汇率数据，否则会查询不到

**（2）ESB**动作流**

a. ESB中心-动作流-新建动作流

b. 触发类型选择流程事件触发，关联Demo流程

![](44e4868119825b4b622f1e526c16df95.jpg)

c.触发时机选择发起节点后

![](300d8c75add1518159414c39679096a5.jpg)

d.新增操作-保存流程

关联流程为当前流程ID，操作者为当前用户ID

![](165a6f03fa0fb48406f7db7e00bb879b.jpg)

e.表单数据动态赋值

设置汇率字段为动态赋值，使用GETRATE函数，该函数根据rateType不同，可能有3-6个参数需要传递：

![](30c1fa2947b28f41ba16b949c90d85f2.jpg)

sourceCurrency：原币种，即为表单上选择的币种(本位币以外的币种)，选择上下文-表单数据-结算币种

![](14feac3353fc44d9201a7a4a88b063e2.jpg)

**（2）ESB**动作流**

targetCurrency：目标币种，一般为本位币，可以直接固定填写本位币的币符或者币种ID

rateType:

实时汇率 (优先取当日浮动汇率，取不到则取最新汇率）

平均汇率 (在E10后台-汇率设置页面维护的平均汇率）

期末汇率 (在E10后台-汇率设置页面维护的期末汇率）

指定日期汇率 (使用指定日期汇率，数据来源为:指定日期浮动汇率>指定日期所在期间汇率>最新汇率)

FXRateRange：汇率类型为2或3时需要传递，格式为yyyy/MM

FXRateDate：汇率类型为4时需要传递，格式为yyyy-MM-dd

periodFXRateType：2:平均汇率 3:期末汇率，当rateType为指定日期汇率时，需要传递此参数，表明获取不到当天浮动汇率时，取哪种类型的区间汇率

f. 效果验证

ESB设置好之后保存并启用-新建Demo流程，输入币种和金额后提交，在下一个节点查看表单，已带出汇率并计算出换算后金额。

![](1243b6720d016270776364ea81166460.jpg)

**（3）**OpenApi开放平台

开放平台接口调用涉及到代码开发，此处不做详细说明，如果需要通过二开的方式调用币种或者汇率，请二开同事参考开放平台文档

开放平台地址：<https://weapp.eteams.cn/sp/opendoc/>

![](c27f822d244619c7d5bf000f07152642.jpg)

#### 七、使用**注意点**

配置浮动汇率更新时要注意选择的数据源是否支持系统设置的本位币