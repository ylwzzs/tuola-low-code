---
aliases: ["1968863586078740992"]
title: 微信小程序集成
created: 2025-07-15
modified: 2025-07-15
tags: ['云桥']
theme: 云桥
---

一、概述

云桥支持将应用放在微信小程序上使用，实现单点登录。

二、操作说明

[[#微信小程序集成配置|1. 微信小程序集成配置]]

[[#云桥管理后台配置|1.1 云桥管理后台配置]]

[[#获取微信小程序资源包|1.2 获取微信小程序资源包]]

[[#微信开发者工具配置|1.3 微信开发者工具配置]]

[[#配置微信小程序主页地址|1.4 配置微信小程序主页地址]]

[[#发布小程序版本|1.5 发布小程序版本]]

[[#云桥配置功能说明|2. 云桥配置功能说明]]

[[#移动端小程序功能说明|3. 移动端小程序功能说明]]

**【开通服务器网络权限的说明】**

1.如果使用本系统进行钉钉集成功能，则需要调用钉钉接口，并且最终用户是通过钉钉来使用集成的功能，所以本系统部署的云桥服务器必须要求，能够访问外网：即开通这台服务器的上网权限，让云桥服务器能够访问互联网，如果贵公司对网络安全要求较高，至少需要让这个服务器能够访问以下地址：  
微信小程序API：https://api.weixin.qq.com  

2.同时请网络管理员将本系统的访问地址映射到外网。  

3.可以用如下方式验证网络是否通畅：  
在云桥服务器上按如下方式检查网络：  
ping api.weixin.qq.com 查看是否能ping通  
Windows:  
浏览器访问 https://api.weixin.qq.com/cgi-bin/token 查看是否有返回结果  
Linux:  
执行命令 curl https://api.weixin.qq.com/cgi-bin/token 查看是否有返回结果

**1.微信小程序集成配置**

## **1.1**云桥**管理后台配置**

【后台管理中心】——【云桥】——【微信小程序集成】，点击新建微信小程序；

![](1ced7d8de6fc658de314ccfc24379cf9.jpg)

获取App ID、AppSecret：访问微信公众平台https://mp.weixin.qq.com，登录小程序管理后台，在【开发】——【开发管理】——【开发设置】——【开发者ID】中即可获取，注意AppSecret重置之后就会变更；

![](cbde8a489a3570a32ec5e8a342a17f7d.jpg)

填写基本设置里面的相关信息：微信小程序名称、App ID、AppSecret，点击保存；

![](d7ee260a7faca13206c903b45472a756.jpg)

设置小程序的主页地址：【链接管理】——【新建】，可以根据需要设置打开应用或者自定义链接，例如设置当前系统外网地址；

![](173b622bf8e12d2a3164c29730782245.jpg)

设置好之后点击保存，复制链接，如下图所示：

![](74370ccdfbf8127c4ef9a1b2e64a2bd4.jpg)

## **1.2获取微信小程序资源包**

访问https://wxdownload.e-cology.com.cn/ebridge/weapp-mini-main.zip  下载微信小程序资源包，注意：项目资源包建议放在英文目录下；

## **1.3微信开发者工具配置**

访问[https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html，下载对应系统小程序开发工具；](https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html)

[![](1236e0813be3b44af2230bd2ab2edce9.jpg)](https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html)

##

打开微信开发工具安装后，点击打开如下图：目录选择到第2点下载的微信小程序资源包解压的目录，如下图所示：

![](cfaa2fbb6355097d1ece6895b8141d7f.jpg)

![](6ca38635774e059648a089e2f25ccce7.jpg)

勾选服务条款，点击确定后如下图：

![](6485c762025f0ad57a7b6f457564c0d0.jpg)

**注意：**请确保打开微信开发**者工具**登录的微信账号在如下图示中拥有小程序开发权限，否则无法进行正常操作；**

![](ed816dd824de9a0ed6bd70e5c13b241f.jpg)

## **1.4 配置微信小程序主页地址**

① 代码中需要配置小程序的服务地址和主页地址：修改app.js文件中的服务地址和主页地址，1服务地址需要填写当前系统【云桥】——【基础参数设置】中的云桥外网地址，2主页地址需要填写第1点（云桥管理后台配置）中复制出来的小程序主页链接；

![](1ff23d6299c2376e762380b95678fbd7.jpg)

确认修改的主页地址无误后，先保存文件：Ctrl+S，然后点击上传；

![](dd101ffe4cdcfdc49107b2d2ef70b063.jpg)

修改对应版本号后点击上传：

![](9600a24d5fb8f4d0cdaa42be27056922.jpg)

访问微信公众平台[https://mp.weixin.qq.com](https://mp.weixin.qq.com，)

将EC系统的域名地址填写到服务器域名》request合法域名里；

![](b35bf29ab70dd615dd63997572deb6ed.jpg)![](001be9166cbc19f710f2dbf38c9614aa.jpg)

将EC系统的域名地址填写到业务域名里；

**注意：小程序业务域名只支持https ，不支持http！！！**

**可信域名不能带有端口号，即云桥的外网地址必须确保是经过ICP备案的域名并且是标准接口（**只能是**443**端口**）；**

**个人类型账号和小游戏账号没有业务域名配置入口，可参考官方说明：https://developers.weixin.qq.com/miniprogram/dev/framework/ability/domain.html。**

**![](0e0c76db3e2a85139509070cd11a3ff8.jpg)**

业务域名填写后，下载校验文件，文件上传到E10服务器e10-front/nginx/build/layout目录下，然后点击保存；如果检测校验文件还是不存在，联系系统部署组协助部署这个校验文件。

![](412682d5e506e74ae9421c0d7b8af655.jpg)

## **1.5发布小程序版本**

访问微信公众平台https://mp.weixin.qq.com，打开小程序管理后台页面设置最新的体验版本小程序；

![](fb1a325fc7d6e05413c4a00de8e814bf.jpg)

可以在开发版本中找到刚才上传的对应小程序版本，设置为体验版本即可在手机端直接体验小程序功能；

![](c6e507980f5a0e07a12489a6b5349f39.jpg)

点击对应版本号下方的体验版二维码，即可手机扫码体验；

![](2e12446ba985f5d0d6e2807a92ce801d.jpg)

在小程序管理后台【管理】——【成员管理】——【所有成员】——【体验成员】中添加体验成员；

**注意：**体验成员需要在【成员管理】中添加！！！不然无法正常体验！！！**

**最后请确认**在**体验版正常的情况下**，然后访问**【版本管理】**，将**对应的版本提交审核；**

![](052d167c7ff28190d198e639489899c5.jpg)

# **2.**云桥配置**功能说明**

用户绑定设置：用户可以通过设置匹配规则来实现手机号一键免登，例如微信小程序手机号匹配业务系统手机号，手机号一致即可匹配成功；

![](1d3cdbd606114cd40408b6e65afdb2ba.jpg)

通讯录管理：可以查看用户的绑定关系，手动操作更换绑定关系或者解除绑定关系；

![](e0897780f3840999df7bdda55d54411c.jpg)

基础设置——关联企业：设置关联企业用于在小程序中使用对应jssdk功能（如：定位、拍照等），关联企业微信请确保企业微信下有集成的应用；

![](0ca6cd1d56f4755343ccdb03bfcb7e46.jpg)

# **3.**移动端小程序功能说明**

第一次登录的用户首先需要绑定系统账号才能正常使用；

![](76b505cb2967a511cf92107b5ea6231f.jpg)

例：主页地址配置为 weapp.eteams.cn 的小程序打开页面如下：

![](3fddda932fa87b66660ac4f82b9fcb76.jpg)